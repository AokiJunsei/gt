{% extends "base.html" %}
{% comment %} TODO blockの名称をbaseに合わせる {% endcomment %}

{% load static %}
{% block title %}管理サイト{% endblock %}

{% block map_list %} active {% endblock %}
{% comment %} TODO DBに登録済みのマップ情報を一覧表示するリストを記載 {% endcomment %}


{%block head%}
<head class = "">
    <div class = "">
        <h1>- マップ情報管理 -</h1>
        <span class="">サブタイトルをどうぞ</span>
    </div>
    <link href="{% static 'css/' %}" rel="stylesheet">
    {% comment %} cssのリンクをどうぞ {% endcomment %}
</head>
{% endblock %}


{% block contents %}
<div class ="">

    {% comment %} TODO filterするためのInputタグを記載 {% endcomment %}

    {% comment %} マップ情報を一覧表示 {% endcomment %}
    {% for maps in map_list%}
    {% comment %} TODO map_listはあとで変数合わせる {% endcomment %}
    {% comment %} titleの隣に変更へ続くボタンと削除へ続くボタンを配置 {% endcomment %}

    <div class = "post-preview">
        {% comment %} TODO 以下はDBに保存される内容に合わせる {% endcomment %}
        <p class = "post-title">{{maps.title}}</p>
        <p class = "post-subtitle">{{map.content|truncatechars:20}}</p>
        <a href="{% url 'map:map_detail' map.pk %}">

        <button><a class="btn btn-success mt-5 mb-3" href="{% url 'map:map_update' object.pk %}">変更</a></button>
        <button><a class="btn btn-danger mt-5 ml-2 mb-3" href="{% url 'map:map_delete' object.pk %}">削除</a></button>
    </div>

    {% empty %}
    <p>マップ情報が見つかりません。</p>
    {% endfor %}

    <div class="d-flex justify-content-end mb-4">
        {% comment %} TODO マップ情報追加ページへのルーティングボタンを追加 {% endcomment %}
        <a class="btn btn-primary float-right" href="{% url 'map:map_register' %}">追加する</a>
    </div>


    <div class="d-flex justify-content-end mb-4">
        {% comment %} TODO 利用者情報閲覧ページへのルーティングボタンを追加 {% endcomment %}
        <a class="btn btn-primary float-right" href="{% url 'map:user_detail' %}">利用者情報を閲覧する</a>
    </div>


    {% comment %}ペネトレーション {% endcomment %}
    {% if is_paginated %}
    <ul class="pagination">
        <!-- 前ページへのリンク -->
        {% if page_obj.has_previous %}
        <li class="page-item">
            <a class="page-link" href="?page={{ page_obj.previous_page_number }}">
                <span aria-hidden="true">&laquo;</span>
            </a>
        </li>
        {% endif %}

        <!-- ページ数表示 -->
        {% for page_num in page_obj.paginator.page_range %} {% if
        page_obj.number == page_num %}
        <li class="page-item active">
            <a class="page-link" href="#">{{ page_num }}</a>
        </li>
        {% else %}
        <li class="page-item">
            <a class="page-link" href="?page={{ page_num }}">{{ page_num }}</a>
        </li>
        {% endif %} {% endfor %}

        <!-- 次ページへのリンク -->
        {% if page_obj.has_next %}
        <li class="page-item">
            <a class="page-link" href="?page={{ page_obj.next_page_number }}">
                <span aria-hidden="true">&raquo;</span>
            </a>
        </li>
        {% endif %}
    </ul>
    {% endif %}


    {% comment %} 削除を確認するモーダル ダイアログ 検討中
    <div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="deleteModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                <h5 class="modal-title" id="deleteModalLabel">確認</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                </div>
                <div class="modal-body">
                    <p>ID: <span id="del_pk"></span> を削除しますか？</p>
                </div>
                <div class="modal-footer">
                    <a href="#" class="btn btn-primary" id="del_url">OK</a>
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                </div>
            </div>
        </div>
    </div> {% endcomment %}

</div>
{% endblock %}