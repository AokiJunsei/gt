{% extends 'base.html' %}
{% block title %} 登録情報更新ページ {% endblock %}
{% block content %}
<div class="ui grid stackable">
    <div class="header">
        <h3>登録情報の変更</h3>
    </div>
    <form class="" action="" method="POST">
        {% csrf_token %}
        {{form.as_p}}
        <button class="" type="submit">変更</button>
    </form>
    <a href="{% url 'gt:account_info' %}">プロフィールに戻る</a>
</div>
{% endblock %}




<!--forms.py(仮)-->

<!--
from django.forms import ModelForm
from django.contrib.auth.models import User

class UserChangeForm(ModelForm):
    class Meta:
        model = User
        fields = [
            'name',
            'old',
            'address',
            'email'
        ]

    def __init__(self, name=None, old=None, address=None, mail=None *args, **kwargs):
        kwargs.setdefault('label_suffix', '')
        super().__init__(*args, **kwargs)
        # ユーザーの更新前情報をフォームに挿入
        if name:
            self.fields['name'].widget.attrs['value'] = name
        if old:
            self.fields['old'].widget.attrs['value'] = old
        if address:
            self.fields['address'].widget.attrs['value'] = address
        if mail:
            self.fields['email'].widget.attrs['value'] = email

    def update(self, user):
        user.name = self.cleaned_data['name']
        user.old = self.cleaned_data['old']
        user.address = self.cleaned_data['address']
        user.mail = self.cleaned_data['email']
        user.save()
-->

<!--views.py(仮)-->

<!--
from django.views.generic import FormView

class UserChangeView(LoginRequiredMixin, FormView):
    template_name = 'gt/user_update.html'
    form_class = UserChangeForm
    success_url = reverse_lazy('gt:account_info')

    def form_valid(self, form):
        #formのupdateメソッドにログインユーザーを渡して更新
        form.update(user=self.request.user)
        return super().form_valid(form)

    def get_form_kwargs(self):
        kwargs = super().get_form_kwargs()
        # 更新前のユーザー情報をkwargsとして渡す
        kwargs.update({
            'name' : self.request.user.name,
            'old' : self.request.user.old,
            'address' : self.request.user.address,
            'email' : self.request.user.email
        })
        return kwargs
-->


<!--urls.py(仮)-->

<!--
    app_name = 'gt'
    urlpatterns = [
        path('user_update/<int:user_id>/', views.user_update, name='user_update'),
    ]
-->
